<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Chris Levy">
  <meta name="dcterms.date" content="2024-05-01">
  <title>Chris Levy - Intro to LLMs</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Intro to LLMs</h1>
  <p class="subtitle">Lunch and Learn Talk</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Chris Levy 
</div>
</div>
</div>

  <p class="date">2024-05-01</p>
</section>
<section id="env-setup" class="title-slide slide level1 smaller center">
<h1>ENV Setup</h1>
<ul>
<li>create a virtual env</li>
</ul>
<pre><code>python3 -m venv env
source env/bin/activate</code></pre>
<ul>
<li>install packages</li>
</ul>
<pre><code>pip install tiktoken
pip install openai
pip install instructor
pip install transformers
pip install torch
pip install python-dotenv
pip install notebook</code></pre>
<ul>
<li>add env vars in .env file</li>
</ul>
<pre><code>OPENAI_API_KEY=&lt;key&gt;
TOGETHER_API_KEY=&lt;key&gt;</code></pre>
</section>

<section>
<section id="background" class="title-slide slide level1 center">
<h1>Background</h1>

</section>
<section id="nlp-through-the-years" class="slide level2 smaller">
<h2>NLP Through The Years</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/ELIZA#Response_and_legacy">ELIZA (MIT),1964-1967</a>, <a href="https://docs.google.com/presentation/d/1oXPs3LXtIVIsVbwTyGjAWj_aWvak9c1uNC4uhkS6glk/edit#slide=id.gea1aecfd7b_0_0">CS25 V4: Lecture 1 (Spring 2024)</a></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="imgs/eliza.png" style="width:80.0%"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="imgs/timeline.png" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="word-embeddings" class="slide level2 smaller">
<h2>Word Embeddings</h2>
<ul>
<li>represent each word as an embedding (vector of numbers)</li>
<li>useful computations such as distance (cosine/euclidean)</li>
<li>mapping of words onto a semantic space</li>
<li>example: Word2Vec (2013), GloVe, BERT, ELMo</li>
</ul>

<img data-src="imgs/word-vectors.png" class="r-stretch"></section>
<section id="attention-and-transformers" class="slide level2">
<h2>Attention and Transformers</h2>
<ul>
<li><a href="https://github.com/nlp-with-transformers/notebooks/blob/main/03_transformer-anatomy.ipynb">Image Source: nlp-with-transformers book</a></li>
</ul>

<img data-src="imgs/self-attention.png" class="r-stretch"></section>
<section id="transformer-multi-head-attention" class="slide level2">
<h2>Transformer &amp; Multi-Head Attention</h2>
<ul>
<li><a href="https://arxiv.org/pdf/1706.03762.pdf">Attention Is All you Need: Paper</a></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="imgs/attention-transformer-paper1.png" style="width:70.0%"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="imgs/attention-transformer-paper2.png"></p>
</div>
</div>
</section>
<section id="what-is-a-llm-large-language-model" class="slide level2">
<h2>What is a LLM (large language model)?</h2>
<ul>
<li>LLMs are scaled up versions of the Transformer architecture (millions/billions of parameters)</li>
<li>Most modern LLMs are <strong>decoder only transformers</strong></li>
<li>Trained on massive amounts of “general” textual data</li>
<li>Training objective is typically “next token prediction”: P(Wt+1|Wt,Wt-1,…,W1)</li>
</ul>
</section>
<section id="next-token-prediction" class="slide level2">
<h2>Next Token Prediction</h2>
<ul>
<li>LLMs are next token predictors</li>
<li>“It is raining today, so I will take my _______.”</li>
</ul>
<p><img data-src="imgs/next_token1.png"></p>
<p><img data-src="imgs/next_token2.png"></p>
</section>
<section id="tokenization-with-tiktoken-library" class="slide level2 smaller">
<h2>Tokenization with tiktoken library</h2>
<ul>
<li>The first step is to convert the input text into <strong>tokens</strong></li>
<li>Each <strong>token</strong> has an id in the vocabulary</li>
</ul>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:14:56.202692Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:14:55.850498Z&quot;}" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="im">import</span> tiktoken</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>enc <span class="op">=</span> tiktoken.encoding_for_model(<span class="st">"gpt-4-0125"</span>)</span>
<span id="cb4-4"><a href="#cb4-4"></a>encoded_text <span class="op">=</span> enc.encode(<span class="st">"tiktoken is great!"</span>)</span>
<span id="cb4-5"><a href="#cb4-5"></a>encoded_text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>[83, 1609, 5963, 374, 2294, 0]</code></pre>
</div>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:14:56.204961Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:14:56.070180Z&quot;}" data-execution_count="3">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a>[enc.decode([token]) <span class="cf">for</span> token <span class="kw">in</span> encoded_text]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>['t', 'ik', 'token', ' is', ' great', '!']</code></pre>
</div>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:14:56.213894Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:14:56.076343Z&quot;}" data-execution_count="4">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>enc.decode([<span class="dv">83</span>, <span class="dv">1609</span>, <span class="dv">5963</span>, <span class="dv">374</span>, <span class="dv">2294</span>, <span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>'tiktoken is great!'</code></pre>
</div>
</div>
</section>
<section id="tokenization-with-transformers-library" class="slide level2 smaller">
<h2>Tokenization with transformers library</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:14:58.055428Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:14:56.080789Z&quot;}" data-execution_count="5">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="im">from</span> transformers <span class="im">import</span> AutoTokenizer</span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a>tokenizer <span class="op">=</span> AutoTokenizer.from_pretrained(<span class="st">"bert-base-uncased"</span>)</span>
<span id="cb10-4"><a href="#cb10-4"></a></span>
<span id="cb10-5"><a href="#cb10-5"></a>texts <span class="op">=</span> [</span>
<span id="cb10-6"><a href="#cb10-6"></a>    <span class="st">"I love summer"</span>,</span>
<span id="cb10-7"><a href="#cb10-7"></a>    <span class="st">"I love tacos"</span>,</span>
<span id="cb10-8"><a href="#cb10-8"></a>]</span>
<span id="cb10-9"><a href="#cb10-9"></a>inputs <span class="op">=</span> tokenizer(</span>
<span id="cb10-10"><a href="#cb10-10"></a>    texts,</span>
<span id="cb10-11"><a href="#cb10-11"></a>    return_tensors<span class="op">=</span><span class="st">"pt"</span>,</span>
<span id="cb10-12"><a href="#cb10-12"></a>    padding<span class="op">=</span><span class="st">"max_length"</span>,</span>
<span id="cb10-13"><a href="#cb10-13"></a>    max_length<span class="op">=</span><span class="dv">16</span>,</span>
<span id="cb10-14"><a href="#cb10-14"></a>    truncation<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb10-15"><a href="#cb10-15"></a>).input_ids</span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="bu">print</span>(inputs)</span>
<span id="cb10-17"><a href="#cb10-17"></a></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="bu">print</span>(inputs.shape)  <span class="co"># (B, T)</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="bu">print</span>(tokenizer.vocab_size)</span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="cf">for</span> row <span class="kw">in</span> inputs:</span>
<span id="cb10-21"><a href="#cb10-21"></a>    <span class="bu">print</span>(tokenizer.convert_ids_to_tokens(row))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tensor([[  101,  1045,  2293,  2621,   102,     0,     0,     0,     0,     0,
             0,     0,     0,     0,     0,     0],
        [  101,  1045,  2293, 11937, 13186,   102,     0,     0,     0,     0,
             0,     0,     0,     0,     0,     0]])
torch.Size([2, 16])
30522
['[CLS]', 'i', 'love', 'summer', '[SEP]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]']
['[CLS]', 'i', 'love', 'ta', '##cos', '[SEP]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]', '[PAD]']</code></pre>
</div>
</div>
</section>
<section id="tokenization-is-the-first-step" class="slide level2 smaller">
<h2>Tokenization is the First Step</h2>

<img data-src="imgs/first_step.png" class="r-stretch"></section>
<section id="llms-are-not-great-at-math.-why" class="slide level2 smaller">
<h2>LLMS are not great at math. Why?</h2>
<ul>
<li>because of tokenization and next token prediction</li>
</ul>
<p>What is the average of: 2009 1746 4824 8439</p>

<img data-src="imgs/llms_suck_at_math.png" class="r-stretch"><div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:14:58.059277Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:14:58.056574Z&quot;}" data-execution_count="6">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>encoded_text <span class="op">=</span> enc.encode(<span class="st">"What is the average of:  2009 1746 4824 8439"</span>)</span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="bu">print</span>(encoded_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[3923, 374, 279, 5578, 315, 25, 220, 220, 1049, 24, 220, 11771, 21, 220, 21984, 19, 220, 23996, 24]</code></pre>
</div>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:14:58.062900Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:14:58.059913Z&quot;}" data-execution_count="7">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="bu">print</span>([enc.decode([token]) <span class="cf">for</span> token <span class="kw">in</span> encoded_text])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['What', ' is', ' the', ' average', ' of', ':', ' ', ' ', '200', '9', ' ', '174', '6', ' ', '482', '4', ' ', '843', '9']</code></pre>
</div>
</div>
</section>
<section id="basic-transformer-architecture---futher-reading" class="slide level2 smaller">
<h2>Basic Transformer Architecture - Futher Reading</h2>
<ul>
<li>Lots of resources online</li>
<li>Some of the ones I enjoyed while learning:
<ul>
<li>Chapter 3 of the book <a href="https://www.oreilly.com/library/view/natural-language-processing/9781098136789/">Natural Language Processing With Transformers</a></li>
<li>Andrej Karpathy’s video <a href="https://www.youtube.com/watch?v=kCc8FmEb1nY">Let’s build GPT: from scratch, in code, spelled out</a></li>
<li>Sebastian Raschka’s Blog Post <a href="https://magazine.sebastianraschka.com/p/understanding-and-coding-self-attention">Understanding and Coding Self-Attention, Multi-Head Attention, Cross-Attention, and Causal-Attention in LLMs</a></li>
<li>Omar Sanseviero’s Blog Post <a href="https://osanseviero.github.io/hackerllama/blog/posts/random_transformer/">The Random Transformer</a></li>
<li><a href="https://jalammar.github.io/illustrated-transformer/">The Illustrated Transformer</a></li>
<li>The original paper: <a href="https://arxiv.org/abs/1706.03762">Attention Is All You Need</a></li>
</ul></li>
</ul>
</section></section>
<section>
<section id="instruction-models" class="title-slide slide level1 center">
<h1>Instruction Models</h1>

</section>
<section id="base-models-vs-instruct-models" class="slide level2 smaller">
<h2>Base Models VS Instruct Models</h2>
<ul>
<li><code>meta-llama/Meta-Llama-3-8B</code> (base model)</li>
</ul>

<img data-src="imgs/base_model_example.png" class="r-stretch"></section>
<section id="base-models-vs-instruct-models-1" class="slide level2 smaller">
<h2>Base Models VS Instruct Models</h2>
<ul>
<li><code>meta-llama/Meta-Llama-3-8B-Instruct</code></li>
</ul>

<img data-src="imgs/instruct_model_example.png" class="r-stretch"></section>
<section id="popular-instruction-fine-tuned-llms" class="slide level2 smaller">
<h2>Popular Instruction Fine-Tuned LLMs</h2>
<ul>
<li>closed
<ul>
<li><a href="https://platform.openai.com/docs/models">Open AI</a>: <code>gpt-4-turbo-2024-04-09</code>, <code>gpt-3.5-turbo-0125</code>, etc.</li>
<li><a href="https://docs.anthropic.com/claude/docs/models-overview">Anthropic</a>: <code>opus</code>, <code>sonnet</code>, <code>haiku</code></li>
<li><a href="https://blog.google/technology/ai/google-gemini-next-generation-model-february-2024/">Google</a>, <code>Gemini 1.5</code></li>
</ul></li>
<li>open
<ul>
<li><a href="https://llama.meta.com/llama3/">Meta</a>: <code>Llama-3-8B-Instruct</code>, <code>Llama-3-70B-Instruct</code></li>
<li><a href="https://mistral.ai/technology/#models">Mistral</a>: <code>Mistral 7B</code>, <code>Mixtral 8x7B</code>, <code>Mixtral 8x22B</code></li>
<li><a href="https://github.com/QwenLM/Qwen">Qwen</a>: <code>Qwen-1.8B</code>, <code>Qwen-7B</code>, <code>Qwen-14B</code>, <code>Qwen-72B</code></li>
<li><a href="https://huggingface.co/HuggingFaceH4">HuggingFace</a>: <code>Zephyr-ORPO-141b-A35b-v0.1</code></li>
<li><a href="DBRX-Instruct-Preview">Databricks</a>: <code>DBRX-Instruct-Preview</code></li>
<li><a href="https://nousresearch.com/releases/">NousResearch</a>: <code>Hermes-2-Pro-Mistral-7B</code>,</li>
<li><a href="https://docs.cohere.com/docs/command-r-plus">Cohere</a>: <code>Command R+</code></li>
</ul></li>
</ul>
</section>
<section id="the-gap-is-closing" class="slide level2 smaller">
<h2>The Gap is closing</h2>
<ul>
<li><a href="https://x.com/maximelabonne/status/1779801605702836454">image source - Maxime Labonne</a>, <a href="https://chat.lmsys.org/?leaderboard">🏆 LMSYS Chatbot Arena</a></li>
<li><a href="https://x.com/jannchie/status/1784621770018058651">another fun animation</a> <img data-src="imgs/closed_vs_open.png"></li>
</ul>
</section>
<section id="aligning-language-models" class="slide level2">
<h2>Aligning language models</h2>
<ul>
<li>There is so much theory/research behind creating instruction models</li>
<li>Not going to cover that here</li>
<li><a href="https://docs.google.com/presentation/d/1quMyI4BAx4rvcDfk8jjv063bmHg4RxZd9mhQloXpMn0/edit#slide=id.g2ca00c5c0f9_0_0">Checkout this recent talk, Aligning open language models, from Nathan Lambert</a></li>
<li><a href="https://www.youtube.com/watch?v=bZQun8Y4L2A">State of GPT Keynote By Andrej Karpathy</a></li>
<li><a href="https://github.com/mlabonne/llm-course">Large Language Model Course by Maxime Labonne</a></li>
</ul>
</section></section>
<section>
<section id="openai-compatible-llm-inference" class="title-slide slide level1 center">
<h1>OpenAI Compatible LLM Inference</h1>

</section>
<section id="openai-compatible-llm-inference-1" class="slide level2">
<h2>OpenAI Compatible LLM Inference</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:14:59.505405Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:14:58.061916Z&quot;}" data-execution_count="8">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a><span class="im">import</span> openai</span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a>client <span class="op">=</span> openai.OpenAI()</span>
<span id="cb16-4"><a href="#cb16-4"></a>chat_completion <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb16-5"><a href="#cb16-5"></a>    model<span class="op">=</span><span class="st">"gpt-3.5-turbo-0125"</span>,</span>
<span id="cb16-6"><a href="#cb16-6"></a>    messages<span class="op">=</span>[</span>
<span id="cb16-7"><a href="#cb16-7"></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: <span class="st">"Who are the main characters from Lord of the Rings?."</span>},</span>
<span id="cb16-8"><a href="#cb16-8"></a>    ],</span>
<span id="cb16-9"><a href="#cb16-9"></a>)</span>
<span id="cb16-10"><a href="#cb16-10"></a>response <span class="op">=</span> chat_completion.choices[<span class="dv">0</span>].message.content</span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="bu">print</span>(response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The main characters from Lord of the Rings are Frodo Baggins, Samwise Gamgee, Aragorn, Legolas, Gimli, Gandalf, Boromir, Merry and Pippin, and Gollum.</code></pre>
</div>
</div>
</section>
<section id="openai-compatible-llm-inference-2" class="slide level2">
<h2>OpenAI Compatible LLM Inference</h2>
<ul>
<li><a href="https://www.together.ai/">together.ai</a></li>
</ul>
<div class="sourceCode" id="cb18" data-code-line-numbers="3,5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a><span class="im">import</span> openai</span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a>client <span class="op">=</span> openai.OpenAI(api_key<span class="op">=</span>os.environ.get(<span class="st">"TOGETHER_API_KEY"</span>), base_url<span class="op">=</span><span class="st">"https://api.together.xyz/v1"</span>)</span>
<span id="cb18-4"><a href="#cb18-4"></a>chat_completion <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb18-5"><a href="#cb18-5"></a>    model<span class="op">=</span><span class="st">"META-LLAMA/LLAMA-3-70B-CHAT-HF"</span>,</span>
<span id="cb18-6"><a href="#cb18-6"></a>    messages<span class="op">=</span>[</span>
<span id="cb18-7"><a href="#cb18-7"></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: <span class="st">"Who are the main characters from Lord of the Rings?."</span>},</span>
<span id="cb18-8"><a href="#cb18-8"></a>    ],</span>
<span id="cb18-9"><a href="#cb18-9"></a>)</span>
<span id="cb18-10"><a href="#cb18-10"></a>response <span class="op">=</span> chat_completion.choices[<span class="dv">0</span>].message.content</span>
<span id="cb18-11"><a href="#cb18-11"></a><span class="bu">print</span>(response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="openai-compatible-llm-inference-3" class="slide level2 smaller">
<h2>OpenAI Compatible LLM Inference</h2>
<ul>
<li><a href="https://www.together.ai/">together.ai</a></li>
</ul>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:15:04.323267Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:14:59.505704Z&quot;}" data-execution_count="9">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a><span class="im">import</span> openai</span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a>client <span class="op">=</span> openai.OpenAI(api_key<span class="op">=</span>os.environ.get(<span class="st">"TOGETHER_API_KEY"</span>), base_url<span class="op">=</span><span class="st">"https://api.together.xyz/v1"</span>)</span>
<span id="cb19-4"><a href="#cb19-4"></a>chat_completion <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb19-5"><a href="#cb19-5"></a>    model<span class="op">=</span><span class="st">"META-LLAMA/LLAMA-3-70B-CHAT-HF"</span>,</span>
<span id="cb19-6"><a href="#cb19-6"></a>    messages<span class="op">=</span>[</span>
<span id="cb19-7"><a href="#cb19-7"></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: <span class="st">"Who are the main characters from Lord of the Rings?."</span>},</span>
<span id="cb19-8"><a href="#cb19-8"></a>    ],</span>
<span id="cb19-9"><a href="#cb19-9"></a>)</span>
<span id="cb19-10"><a href="#cb19-10"></a>response <span class="op">=</span> chat_completion.choices[<span class="dv">0</span>].message.content</span>
<span id="cb19-11"><a href="#cb19-11"></a><span class="bu">print</span>(response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The main characters from J.R.R. Tolkien's epic fantasy novel "The Lord of the Rings" are:

1. **Frodo Baggins**: The hobbit who inherits the One Ring from Bilbo Baggins and undertakes the perilous journey to destroy it in the fires of Mount Doom.
2. **Samwise Gamgee** (Sam): Frodo's loyal hobbit servant and friend, who accompanies him on his quest.
3. **Aragorn (Strider)**: A human warrior who becomes the leader of the Fellowship of the Ring and helps guide Frodo on his journey. He is the rightful King of Gondor.
4. **Legolas**: An elf archer who joins the Fellowship and provides skilled marksmanship and agility.
5. **Gimli**: A dwarf warrior who joins the Fellowship and provides strength and combat skills.
6. **Gandalf the Grey**: A powerful wizard who helps guide Frodo on his quest and provides wisdom and magical assistance.
7. **Boromir**: A human warrior from the land of Gondor, who joins the Fellowship but ultimately tries to take the Ring from Frodo.
8. **Merry Brandybuck** and **Pippin Took**: Frodo's hobbit cousins, who join the Fellowship and provide comic relief and bravery in the face of danger.
9. **Sauron**: The primary antagonist, a dark lord who created the One Ring and seeks to conquer Middle-earth.
10. **Saruman**: A wizard who betrays Gandalf and allies himself with Sauron, seeking to gain power and control over Middle-earth.

These characters form the core of the story, and their interactions and relationships drive the plot of "The Lord of the Rings".</code></pre>
</div>
</div>
</section>
<section id="openai-compatible-llm-inference-4" class="slide level2 smaller">
<h2>OpenAI Compatible LLM Inference</h2>
<ul>
<li>local inference with <a href="https://ollama.com/">ollama</a></li>
</ul>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:15:22.195834Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:15:04.323425Z&quot;}" data-execution_count="10">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="im">import</span> openai</span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a>client <span class="op">=</span> openai.OpenAI(api_key<span class="op">=</span><span class="st">"ollama"</span>, base_url<span class="op">=</span><span class="st">"http://localhost:11434/v1"</span>)</span>
<span id="cb21-4"><a href="#cb21-4"></a>chat_completion <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb21-5"><a href="#cb21-5"></a>    model<span class="op">=</span><span class="st">"llama3"</span>,</span>
<span id="cb21-6"><a href="#cb21-6"></a>    messages<span class="op">=</span>[</span>
<span id="cb21-7"><a href="#cb21-7"></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: <span class="st">"Who are the main characters from Lord of the Rings?."</span>},</span>
<span id="cb21-8"><a href="#cb21-8"></a>    ],</span>
<span id="cb21-9"><a href="#cb21-9"></a>)</span>
<span id="cb21-10"><a href="#cb21-10"></a>response <span class="op">=</span> chat_completion.choices[<span class="dv">0</span>].message.content</span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="bu">print</span>(response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The main characters in J.R.R. Tolkien's "Lord of the Rings" trilogy, which includes "The Fellowship of the Ring", "The Two Towers", and "The Return of the King", are:

1. Frodo Baggins: The hobbit who inherits the One Ring from Bilbo and sets out on a quest to destroy it in the fires of Mount Doom.
2. Samwise Gamgee (Sam): Frodo's loyal hobbit servant and friend, who accompanies him on his journey to Mordor.
3. Aragorn (Strider): A human warrior who leads the Fellowship and helps them navigate the perilous lands of Middle-earth.
4. Legolas: An elf archer who joins the Fellowship and fights alongside them against Sauron's armies.
5. Gimli: A dwarf warrior who also joins the Fellowship, seeking to avenge his father's death at the hands of orcs.
6. Boromir: The human son of the Steward of Gondor, who tries to take the One Ring from Frodo for the benefit of his own people.
7. Meriadoc Brandybuck (Merry) and Peregrin Took (Pippin): Two hobbit friends of Frodo's who accompany him on his journey and become embroiled in the quest to destroy the Ring.

These characters, along with Gandalf the Grey, a powerful wizard, and other supporting characters, drive the story and its themes of friendship, sacrifice, and the struggle against evil.</code></pre>
</div>
</div>
</section>
<section id="chat-templates" class="slide level2 smaller">
<h2>Chat Templates</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:15:22.441153Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:15:22.198330Z&quot;}" data-execution_count="11">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a><span class="im">from</span> transformers <span class="im">import</span> AutoTokenizer</span>
<span id="cb23-2"><a href="#cb23-2"></a></span>
<span id="cb23-3"><a href="#cb23-3"></a>checkpoint <span class="op">=</span> <span class="st">"meta-llama/Meta-Llama-3-8B-Instruct"</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>tokenizer <span class="op">=</span> AutoTokenizer.from_pretrained(checkpoint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Each model has its own expected input format. For Llama3 it’s this:</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a><span class="co">"""</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="co">&lt;|begin_of_text|&gt;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3"></a></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="co">You are a friendly chatbot who always responds in the style of a pirate&lt;|eot_id|&gt;&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;</span></span>
<span id="cb24-5"><a href="#cb24-5"></a></span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="co">How many helicopters can a human eat in one sitting?&lt;|eot_id|&gt;&lt;|start_header_id|&gt;assistant&lt;|end_header_id|&gt;</span></span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="co">"""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>With chat templates we can use this familiar standard:</li>
</ul>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:15:22.497923Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:15:22.440908Z&quot;}" data-execution_count="12">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a>messages <span class="op">=</span> [</span>
<span id="cb25-2"><a href="#cb25-2"></a>    {</span>
<span id="cb25-3"><a href="#cb25-3"></a>        <span class="st">"role"</span>: <span class="st">"system"</span>,</span>
<span id="cb25-4"><a href="#cb25-4"></a>        <span class="st">"content"</span>: <span class="st">"You are a friendly chatbot who always responds in the style of a pirate"</span>,</span>
<span id="cb25-5"><a href="#cb25-5"></a>    },</span>
<span id="cb25-6"><a href="#cb25-6"></a>    {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: <span class="st">"How many helicopters can a human eat in one sitting?"</span>},</span>
<span id="cb25-7"><a href="#cb25-7"></a>]</span>
<span id="cb25-8"><a href="#cb25-8"></a>tokenized_chat <span class="op">=</span> tokenizer.apply_chat_template(messages, tokenize<span class="op">=</span><span class="va">True</span>, add_generation_prompt<span class="op">=</span><span class="va">True</span>, return_tensors<span class="op">=</span><span class="st">"pt"</span>)</span>
<span id="cb25-9"><a href="#cb25-9"></a><span class="bu">print</span>(tokenizer.decode(tokenized_chat[<span class="dv">0</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;|begin_of_text|&gt;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;

You are a friendly chatbot who always responds in the style of a pirate&lt;|eot_id|&gt;&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;

How many helicopters can a human eat in one sitting?&lt;|eot_id|&gt;&lt;|start_header_id|&gt;assistant&lt;|end_header_id|&gt;</code></pre>
</div>
</div>
</section></section>
<section>
<section id="structured-output" class="title-slide slide level1 center">
<h1>Structured Output</h1>

</section>
<section id="structured-output-1" class="slide level2 smaller">
<h2>Structured Output</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:15:27.339931Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:15:22.468544Z&quot;}" data-execution_count="13">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a><span class="im">import</span> openai</span>
<span id="cb27-2"><a href="#cb27-2"></a></span>
<span id="cb27-3"><a href="#cb27-3"></a>client <span class="op">=</span> openai.OpenAI()</span>
<span id="cb27-4"><a href="#cb27-4"></a>chat_completion <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb27-5"><a href="#cb27-5"></a>    model<span class="op">=</span><span class="st">"gpt-3.5-turbo-0125"</span>,</span>
<span id="cb27-6"><a href="#cb27-6"></a>    messages<span class="op">=</span>[</span>
<span id="cb27-7"><a href="#cb27-7"></a>        {</span>
<span id="cb27-8"><a href="#cb27-8"></a>            <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb27-9"><a href="#cb27-9"></a>            <span class="st">"content"</span>: <span class="st">"Who are the main characters from Lord of the Rings?. "</span></span>
<span id="cb27-10"><a href="#cb27-10"></a>            <span class="st">"For each character give the name, race, "</span></span>
<span id="cb27-11"><a href="#cb27-11"></a>            <span class="st">"favorite food, skills, weapons, and a fun fact."</span>,</span>
<span id="cb27-12"><a href="#cb27-12"></a>        },</span>
<span id="cb27-13"><a href="#cb27-13"></a>    ],</span>
<span id="cb27-14"><a href="#cb27-14"></a>)</span>
<span id="cb27-15"><a href="#cb27-15"></a>response <span class="op">=</span> chat_completion.choices[<span class="dv">0</span>].message.content</span>
<span id="cb27-16"><a href="#cb27-16"></a><span class="bu">print</span>(response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1. Frodo Baggins
- Race: Hobbit
- Favorite food: Mushrooms
- Skills: Determination, stealth, resilience
- Weapons: Sting (his sword)
- Fun fact: Frodo is the only character to have directly interacted with the One Ring and survived its corrupting influence.

2. Aragorn (also known as Strider)
- Race: Human (Dunedain)
- Favorite food: Lembas bread
- Skills: Swordsmanship, tracking, leadership
- Weapons: Anduril (his sword), bow and arrows
- Fun fact: Aragorn is the heir to the throne of Gondor and the rightful King of Arnor.

3. Gandalf
- Race: Maia (wizard)
- Favorite food: Pipe-weed
- Skills: Magic, wisdom, leadership
- Weapons: Glamdring (his sword), staff
- Fun fact: Gandalf is actually one of the Maiar, a group of powerful beings who serve the Valar (gods) in the world of Middle-earth.

4. Legolas
- Race: Elf
- Favorite food: Waybread (Lembas)
- Skills: Archery, agility, keen eyesight
- Weapons: Bow and arrows, knives
- Fun fact: Legolas is the son of Thranduil, the Elven King of the Woodland Realm in Mirkwood.

5. Gimli
- Race: Dwarf
- Favorite food: Roast meats
- Skills: Axe-fighting, mining, loyalty
- Weapons: Axe, throwing axes
- Fun fact: Gimli is a member of the Fellowship representing the Dwarves, who are known for their craftsmanship and love of gold and jewels.</code></pre>
</div>
</div>
</section>
<section id="structured-output-2" class="slide level2 smaller">
<h2>Structured Output</h2>
<ul>
<li><a href="https://platform.openai.com/docs/guides/text-generation/json-mode">JSON mode</a> and <a href="https://platform.openai.com/docs/guides/function-calling">Function Calling</a> give us structured output</li>
<li><a href="https://github.com/jxnl/instructor">instructor - library</a> - <a href="https://www.youtube.com/watch?v=yj-wSRJwrrc">“Pydantic is all you need”</a></li>
</ul>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:15:28.054711Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:15:27.349766Z&quot;}" data-execution_count="14">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="im">import</span> openai</span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="im">import</span> instructor</span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel</span>
<span id="cb29-4"><a href="#cb29-4"></a></span>
<span id="cb29-5"><a href="#cb29-5"></a>client <span class="op">=</span> instructor.from_openai(openai.OpenAI())</span>
<span id="cb29-6"><a href="#cb29-6"></a></span>
<span id="cb29-7"><a href="#cb29-7"></a></span>
<span id="cb29-8"><a href="#cb29-8"></a><span class="co"># Define your desired output structure</span></span>
<span id="cb29-9"><a href="#cb29-9"></a><span class="kw">class</span> UserInfo(BaseModel):</span>
<span id="cb29-10"><a href="#cb29-10"></a>    name: <span class="bu">str</span></span>
<span id="cb29-11"><a href="#cb29-11"></a>    age: <span class="bu">int</span></span>
<span id="cb29-12"><a href="#cb29-12"></a></span>
<span id="cb29-13"><a href="#cb29-13"></a></span>
<span id="cb29-14"><a href="#cb29-14"></a><span class="co"># Extract structured data from natural language</span></span>
<span id="cb29-15"><a href="#cb29-15"></a>user_info <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb29-16"><a href="#cb29-16"></a>    model<span class="op">=</span><span class="st">"gpt-3.5-turbo-0125"</span>,</span>
<span id="cb29-17"><a href="#cb29-17"></a>    response_model<span class="op">=</span>UserInfo,</span>
<span id="cb29-18"><a href="#cb29-18"></a>    messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: <span class="st">"Chris is 38 years old."</span>}],</span>
<span id="cb29-19"><a href="#cb29-19"></a>)</span>
<span id="cb29-20"><a href="#cb29-20"></a><span class="bu">print</span>(user_info.model_dump())</span>
<span id="cb29-21"><a href="#cb29-21"></a><span class="bu">print</span>(user_info.name)</span>
<span id="cb29-22"><a href="#cb29-22"></a><span class="bu">print</span>(user_info.age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'name': 'Chris', 'age': 38}
Chris
38</code></pre>
</div>
</div>
</section>
<section id="structured-output-3" class="slide level2 smaller">
<h2>Structured Output</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:15:28.067840Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:15:28.056823Z&quot;}" data-execution_count="15">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="im">import</span> openai</span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="im">import</span> instructor</span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="im">from</span> typing <span class="im">import</span> List</span>
<span id="cb31-4"><a href="#cb31-4"></a></span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel, field_validator</span>
<span id="cb31-6"><a href="#cb31-6"></a></span>
<span id="cb31-7"><a href="#cb31-7"></a>client <span class="op">=</span> instructor.from_openai(openai.OpenAI())</span>
<span id="cb31-8"><a href="#cb31-8"></a></span>
<span id="cb31-9"><a href="#cb31-9"></a></span>
<span id="cb31-10"><a href="#cb31-10"></a><span class="kw">class</span> Character(BaseModel):</span>
<span id="cb31-11"><a href="#cb31-11"></a>    name: <span class="bu">str</span></span>
<span id="cb31-12"><a href="#cb31-12"></a>    race: <span class="bu">str</span></span>
<span id="cb31-13"><a href="#cb31-13"></a>    fun_fact: <span class="bu">str</span></span>
<span id="cb31-14"><a href="#cb31-14"></a>    favorite_food: <span class="bu">str</span></span>
<span id="cb31-15"><a href="#cb31-15"></a>    skills: List[<span class="bu">str</span>]</span>
<span id="cb31-16"><a href="#cb31-16"></a>    weapons: List[<span class="bu">str</span>]</span>
<span id="cb31-17"><a href="#cb31-17"></a></span>
<span id="cb31-18"><a href="#cb31-18"></a></span>
<span id="cb31-19"><a href="#cb31-19"></a><span class="kw">class</span> Characters(BaseModel):</span>
<span id="cb31-20"><a href="#cb31-20"></a>    characters: List[Character]</span>
<span id="cb31-21"><a href="#cb31-21"></a></span>
<span id="cb31-22"><a href="#cb31-22"></a>    <span class="at">@field_validator</span>(<span class="st">"characters"</span>)</span>
<span id="cb31-23"><a href="#cb31-23"></a>    <span class="at">@classmethod</span></span>
<span id="cb31-24"><a href="#cb31-24"></a>    <span class="kw">def</span> validate_characters(cls, v):</span>
<span id="cb31-25"><a href="#cb31-25"></a>        <span class="cf">if</span> <span class="bu">len</span>(v) <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb31-26"><a href="#cb31-26"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="ss">f"The number of characters must be at least 10, but it is </span><span class="sc">{</span><span class="bu">len</span>(v)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb31-27"><a href="#cb31-27"></a>        <span class="cf">return</span> v</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:15:35.427043Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:15:28.072249Z&quot;}" data-execution_count="16">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb32-2"><a href="#cb32-2"></a>    model<span class="op">=</span><span class="st">"gpt-3.5-turbo-0125"</span>,</span>
<span id="cb32-3"><a href="#cb32-3"></a>    messages<span class="op">=</span>[</span>
<span id="cb32-4"><a href="#cb32-4"></a>        {</span>
<span id="cb32-5"><a href="#cb32-5"></a>            <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb32-6"><a href="#cb32-6"></a>            <span class="st">"content"</span>: <span class="st">"Who are the main characters from Lord of the Rings?. "</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>            <span class="st">"For each character give the name, race, "</span></span>
<span id="cb32-8"><a href="#cb32-8"></a>            <span class="st">"favorite food, skills, weapons, and a fun fact. Give me at least 10 different characters."</span>,</span>
<span id="cb32-9"><a href="#cb32-9"></a>        },</span>
<span id="cb32-10"><a href="#cb32-10"></a>    ],</span>
<span id="cb32-11"><a href="#cb32-11"></a>    response_model<span class="op">=</span>Characters,</span>
<span id="cb32-12"><a href="#cb32-12"></a>    max_retries<span class="op">=</span><span class="dv">4</span>,</span>
<span id="cb32-13"><a href="#cb32-13"></a>)</span>
<span id="cb32-14"><a href="#cb32-14"></a></span>
<span id="cb32-15"><a href="#cb32-15"></a><span class="im">from</span> pprint <span class="im">import</span> pprint</span>
<span id="cb32-16"><a href="#cb32-16"></a></span>
<span id="cb32-17"><a href="#cb32-17"></a>pprint(response.model_dump())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'characters': [{'favorite_food': 'Mushrooms',
                 'fun_fact': 'Frodo is the nephew of Bilbo Baggins.',
                 'name': 'Frodo Baggins',
                 'race': 'Hobbit',
                 'skills': ['Ringbearer', 'Stealth', 'Courage'],
                 'weapons': ['Sting', 'Phial of Galadriel']},
                {'favorite_food': 'Lembas bread',
                 'fun_fact': 'Aragorn is the rightful heir to the throne of '
                             'Gondor.',
                 'name': 'Aragorn',
                 'race': 'Man',
                 'skills': ['Swordsmanship', 'Leadership', 'Tracking'],
                 'weapons': ['Anduril', 'Bow and Arrow']},
                {'favorite_food': 'Roast Pork',
                 'fun_fact': 'Gimli is the son of Gloin, one of the Dwarves in '
                             "'The Hobbit'.",
                 'name': 'Gimli',
                 'race': 'Dwarf',
                 'skills': ['Axe throwing', 'Smithing', 'Courage'],
                 'weapons': ['Axe', 'Throwing Axe']},
                {'favorite_food': 'Lembas bread',
                 'fun_fact': 'Legolas has keen eyesight and can spot enemies '
                             'from great distances.',
                 'name': 'Legolas',
                 'race': 'Elf',
                 'skills': ['Archery', 'Agility', 'Sight'],
                 'weapons': ['Bow', 'Arrow']},
                {'favorite_food': 'Pipe-weed',
                 'fun_fact': 'Gandalf is also known as Mithrandir in Elvish.',
                 'name': 'Gandalf',
                 'race': 'Maia',
                 'skills': ['Wizardry', 'Wisdom', 'Combat'],
                 'weapons': ['Glamdring', 'Staff']},
                {'favorite_food': 'Venison',
                 'fun_fact': 'Boromir hails from the realm of Gondor.',
                 'name': 'Boromir',
                 'race': 'Man',
                 'skills': ['Swordsmanship', 'Leadership', 'Athletics'],
                 'weapons': ['Sword', 'Shield']},
                {'favorite_food': 'Potatoes',
                 'fun_fact': 'Sam is known for his unwavering loyalty to '
                             'Frodo.',
                 'name': 'Samwise Gamgee',
                 'race': 'Hobbit',
                 'skills': ['Gardening', 'Loyalty', 'Cooking'],
                 'weapons': ['Cooking pot', 'Gardening tools']},
                {'favorite_food': 'Berry tarts',
                 'fun_fact': 'Arwen is the daughter of Elrond, Lord of '
                             'Rivendell.',
                 'name': 'Arwen',
                 'race': 'Half-Elf',
                 'skills': ['Horseback riding', 'Healing', 'Sword fighting'],
                 'weapons': ['Sword']},
                {'favorite_food': 'Apple pie',
                 'fun_fact': "Merry is one of Frodo's close friends and part "
                             'of the Fellowship of the Ring.',
                 'name': 'Merry Brandybuck',
                 'race': 'Hobbit',
                 'skills': ['Stealth', 'Swordsmanship', 'Cooking'],
                 'weapons': ['Dagger', 'Sword']},
                {'favorite_food': 'Mushrooms',
                 'fun_fact': 'Pippin becomes a Knight of Gondor for his '
                             'bravery in battle.',
                 'name': 'Pippin Took',
                 'race': 'Hobbit',
                 'skills': ['Loyalty', 'Entertainment', 'Courage'],
                 'weapons': ['Dagger', 'Sword']}]}</code></pre>
</div>
</div>
</section>
<section id="function-calling" class="slide level2 smaller">
<h2>Function Calling</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:15:58.998954Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:15:35.430315Z&quot;}" data-execution_count="17">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1"></a>tools <span class="op">=</span> [</span>
<span id="cb34-2"><a href="#cb34-2"></a>    {</span>
<span id="cb34-3"><a href="#cb34-3"></a>        <span class="st">"type"</span>: <span class="st">"function"</span>,</span>
<span id="cb34-4"><a href="#cb34-4"></a>        <span class="st">"function"</span>: {</span>
<span id="cb34-5"><a href="#cb34-5"></a>            <span class="st">"name"</span>: <span class="st">"get_weather_forecast"</span>,</span>
<span id="cb34-6"><a href="#cb34-6"></a>            <span class="st">"description"</span>: <span class="st">"Provides a weather forecast for a given location and date."</span>,</span>
<span id="cb34-7"><a href="#cb34-7"></a>            <span class="st">"parameters"</span>: {</span>
<span id="cb34-8"><a href="#cb34-8"></a>                <span class="st">"type"</span>: <span class="st">"object"</span>,</span>
<span id="cb34-9"><a href="#cb34-9"></a>                <span class="st">"properties"</span>: {<span class="st">"location"</span>: {<span class="st">"type"</span>: <span class="st">"string"</span>}, <span class="st">"date"</span>: {<span class="st">"type"</span>: <span class="st">"string"</span>}},</span>
<span id="cb34-10"><a href="#cb34-10"></a>                <span class="st">"required"</span>: [<span class="st">"location"</span>, <span class="st">"date"</span>],</span>
<span id="cb34-11"><a href="#cb34-11"></a>            },</span>
<span id="cb34-12"><a href="#cb34-12"></a>        },</span>
<span id="cb34-13"><a href="#cb34-13"></a>    },</span>
<span id="cb34-14"><a href="#cb34-14"></a>    {</span>
<span id="cb34-15"><a href="#cb34-15"></a>        <span class="st">"type"</span>: <span class="st">"function"</span>,</span>
<span id="cb34-16"><a href="#cb34-16"></a>        <span class="st">"function"</span>: {</span>
<span id="cb34-17"><a href="#cb34-17"></a>            <span class="st">"name"</span>: <span class="st">"book_flight"</span>,</span>
<span id="cb34-18"><a href="#cb34-18"></a>            <span class="st">"description"</span>: <span class="st">"Book a flight."</span>,</span>
<span id="cb34-19"><a href="#cb34-19"></a>            <span class="st">"parameters"</span>: {</span>
<span id="cb34-20"><a href="#cb34-20"></a>                <span class="st">"type"</span>: <span class="st">"object"</span>,</span>
<span id="cb34-21"><a href="#cb34-21"></a>                <span class="st">"properties"</span>: {</span>
<span id="cb34-22"><a href="#cb34-22"></a>                    <span class="st">"departure_city"</span>: {<span class="st">"type"</span>: <span class="st">"string"</span>},</span>
<span id="cb34-23"><a href="#cb34-23"></a>                    <span class="st">"arrival_city"</span>: {<span class="st">"type"</span>: <span class="st">"string"</span>},</span>
<span id="cb34-24"><a href="#cb34-24"></a>                    <span class="st">"departure_date"</span>: {<span class="st">"type"</span>: <span class="st">"string"</span>},</span>
<span id="cb34-25"><a href="#cb34-25"></a>                    <span class="st">"return_date"</span>: {<span class="st">"type"</span>: <span class="st">"string"</span>},</span>
<span id="cb34-26"><a href="#cb34-26"></a>                    <span class="st">"num_passengers"</span>: {<span class="st">"type"</span>: <span class="st">"integer"</span>},</span>
<span id="cb34-27"><a href="#cb34-27"></a>                    <span class="st">"cabin_class"</span>: {<span class="st">"type"</span>: <span class="st">"string"</span>},</span>
<span id="cb34-28"><a href="#cb34-28"></a>                },</span>
<span id="cb34-29"><a href="#cb34-29"></a>                <span class="st">"required"</span>: [</span>
<span id="cb34-30"><a href="#cb34-30"></a>                    <span class="st">"departure_city"</span>,</span>
<span id="cb34-31"><a href="#cb34-31"></a>                    <span class="st">"arrival_city"</span>,</span>
<span id="cb34-32"><a href="#cb34-32"></a>                    <span class="st">"departure_date"</span>,</span>
<span id="cb34-33"><a href="#cb34-33"></a>                    <span class="st">"return_date"</span>,</span>
<span id="cb34-34"><a href="#cb34-34"></a>                    <span class="st">"num_passengers"</span>,</span>
<span id="cb34-35"><a href="#cb34-35"></a>                    <span class="st">"cabin_class"</span>,</span>
<span id="cb34-36"><a href="#cb34-36"></a>                ],</span>
<span id="cb34-37"><a href="#cb34-37"></a>            },</span>
<span id="cb34-38"><a href="#cb34-38"></a>        },</span>
<span id="cb34-39"><a href="#cb34-39"></a>    },</span>
<span id="cb34-40"><a href="#cb34-40"></a>    {</span>
<span id="cb34-41"><a href="#cb34-41"></a>        <span class="st">"type"</span>: <span class="st">"function"</span>,</span>
<span id="cb34-42"><a href="#cb34-42"></a>        <span class="st">"function"</span>: {</span>
<span id="cb34-43"><a href="#cb34-43"></a>            <span class="st">"name"</span>: <span class="st">"send_slack_message"</span>,</span>
<span id="cb34-44"><a href="#cb34-44"></a>            <span class="st">"description"</span>: <span class="st">"Send a slack message to specific channel."</span>,</span>
<span id="cb34-45"><a href="#cb34-45"></a>            <span class="st">"parameters"</span>: {</span>
<span id="cb34-46"><a href="#cb34-46"></a>                <span class="st">"type"</span>: <span class="st">"object"</span>,</span>
<span id="cb34-47"><a href="#cb34-47"></a>                <span class="st">"properties"</span>: {<span class="st">"channel_name"</span>: {<span class="st">"type"</span>: <span class="st">"string"</span>}, <span class="st">"message"</span>: {<span class="st">"type"</span>: <span class="st">"string"</span>}},</span>
<span id="cb34-48"><a href="#cb34-48"></a>                <span class="st">"required"</span>: [<span class="st">"channel_name"</span>, <span class="st">"message"</span>],</span>
<span id="cb34-49"><a href="#cb34-49"></a>            },</span>
<span id="cb34-50"><a href="#cb34-50"></a>        },</span>
<span id="cb34-51"><a href="#cb34-51"></a>    },</span>
<span id="cb34-52"><a href="#cb34-52"></a>]</span>
<span id="cb34-53"><a href="#cb34-53"></a></span>
<span id="cb34-54"><a href="#cb34-54"></a><span class="im">import</span> openai</span>
<span id="cb34-55"><a href="#cb34-55"></a><span class="im">from</span> datetime <span class="im">import</span> date</span>
<span id="cb34-56"><a href="#cb34-56"></a><span class="im">import</span> json</span>
<span id="cb34-57"><a href="#cb34-57"></a></span>
<span id="cb34-58"><a href="#cb34-58"></a>client <span class="op">=</span> openai.OpenAI()</span>
<span id="cb34-59"><a href="#cb34-59"></a>chat_completion <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb34-60"><a href="#cb34-60"></a>    model<span class="op">=</span><span class="st">"gpt-4-turbo"</span>,</span>
<span id="cb34-61"><a href="#cb34-61"></a>    messages<span class="op">=</span>[</span>
<span id="cb34-62"><a href="#cb34-62"></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="ss">f"Today's date is </span><span class="sc">{</span>date<span class="sc">.</span>today()<span class="sc">}</span><span class="ss">"</span>},</span>
<span id="cb34-63"><a href="#cb34-63"></a>        {</span>
<span id="cb34-64"><a href="#cb34-64"></a>            <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb34-65"><a href="#cb34-65"></a>            <span class="st">"content"</span>: <span class="st">"""This coming Friday I need to book a flight from Halifax, NS to Austin, Texas. </span></span>
<span id="cb34-66"><a href="#cb34-66"></a><span class="st">                                    It will be me and my friend and we need first class seats. </span></span>
<span id="cb34-67"><a href="#cb34-67"></a><span class="st">                                    We will come back on Sunday. Let me know what I should pack for clothes </span></span>
<span id="cb34-68"><a href="#cb34-68"></a><span class="st">                                    according to the weather there each day. Also please remind my team on </span></span>
<span id="cb34-69"><a href="#cb34-69"></a><span class="st">                                    the DEV slack channel that I will be out of office on Friday. </span></span>
<span id="cb34-70"><a href="#cb34-70"></a><span class="st">                                    1. Book the flight. </span></span>
<span id="cb34-71"><a href="#cb34-71"></a><span class="st">                                    2. Let me know the weather. </span></span>
<span id="cb34-72"><a href="#cb34-72"></a><span class="st">                                    3. Send the slack message."""</span>,</span>
<span id="cb34-73"><a href="#cb34-73"></a>        },</span>
<span id="cb34-74"><a href="#cb34-74"></a>    ],</span>
<span id="cb34-75"><a href="#cb34-75"></a>    tools<span class="op">=</span>tools,</span>
<span id="cb34-76"><a href="#cb34-76"></a>)</span>
<span id="cb34-77"><a href="#cb34-77"></a></span>
<span id="cb34-78"><a href="#cb34-78"></a><span class="cf">for</span> tool <span class="kw">in</span> chat_completion.choices[<span class="dv">0</span>].message.tool_calls:</span>
<span id="cb34-79"><a href="#cb34-79"></a>    <span class="bu">print</span>(<span class="ss">f"function name: </span><span class="sc">{</span>tool<span class="sc">.</span>function<span class="sc">.</span>name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb34-80"><a href="#cb34-80"></a>    <span class="bu">print</span>(<span class="ss">f"function arguments: </span><span class="sc">{</span>json<span class="sc">.</span>loads(tool.function.arguments)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb34-81"><a href="#cb34-81"></a>    <span class="bu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function name: book_flight
function arguments: {'departure_city': 'Halifax', 'arrival_city': 'Austin', 'departure_date': '2024-05-03', 'return_date': '2024-05-05', 'num_passengers': 2, 'cabin_class': 'First'}

function name: get_weather_forecast
function arguments: {'location': 'Austin, Texas', 'date': '2024-05-03'}

function name: get_weather_forecast
function arguments: {'location': 'Austin, Texas', 'date': '2024-05-04'}

function name: get_weather_forecast
function arguments: {'location': 'Austin, Texas', 'date': '2024-05-05'}

function name: send_slack_message
function arguments: {'channel_name': 'DEV', 'message': 'I will be out of office this Friday, May 3, 2024. Please reach out via email if urgent.'}</code></pre>
</div>
</div>
</section></section>
<section>
<section id="rag-retrieval-augmented-generation" class="title-slide slide level1 smaller center">
<h1>RAG: Retrieval Augmented Generation</h1>

</section>
<section id="rag-step-1---index-your-documents" class="slide level2 smaller">
<h2>RAG: Step 1 - Index your Documents</h2>
<ul>
<li>RAG is a technique for augmenting LLM knowledge with additional data.</li>
<li>image source: <a href="https://python.langchain.com/docs/use_cases/question_answering/">langchain docs</a></li>
</ul>

<img data-src="imgs/rag_part1.png" class="r-stretch"></section>
<section id="rag-step-2---query-and-prompt-llm" class="slide level2">
<h2>RAG: Step 2 - Query and Prompt LLM</h2>

<img data-src="imgs/rag_part2.png" style="width:60.0%" class="r-stretch"></section>
<section id="rag-resources" class="slide level2">
<h2>RAG Resources</h2>
<ul>
<li>Vector DBs
<ul>
<li><a href="https://weaviate.io/developers/weaviate/starter-guides/generative">weaviate</a></li>
<li><a href="https://www.pinecone.io/learn/retrieval-augmented-generation/">pinecone</a></li>
<li><a href="https://blog.vespa.ai/scaling-personal-ai-assistants-with-streaming-mode/">vespa</a></li>
<li><a href="https://qdrant.tech/articles/what-is-rag-in-ai/">qdrant</a></li>
</ul></li>
<li>LLM Frameworks: (not necessary for building on prod but good for learning and POC)
<ul>
<li><a href="https://www.llamaindex.ai/">LlamaIndex</a></li>
<li><a href="https://python.langchain.com/docs/use_cases/question_answering/">langchain</a></li>
</ul></li>
</ul>
</section></section>
<section>
<section id="multimodal" class="title-slide slide level1 center">
<h1>MultiModal</h1>

</section>
<section id="multimodal-1" class="slide level2 smaller">
<h2>MultiModal</h2>

<img data-src="https://i.pinimg.com/736x/6e/71/0d/6e710de5084379ba6a57b77e6579084f.jpg" class="r-stretch"></section>
<section id="multimodal-2" class="slide level2 smaller">
<h2>MultiModal</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:16:08.931509Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:15:59.003526Z&quot;}" data-execution_count="18">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb36-2"><a href="#cb36-2"></a></span>
<span id="cb36-3"><a href="#cb36-3"></a>client <span class="op">=</span> OpenAI()</span>
<span id="cb36-4"><a href="#cb36-4"></a></span>
<span id="cb36-5"><a href="#cb36-5"></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb36-6"><a href="#cb36-6"></a>    model<span class="op">=</span><span class="st">"gpt-4-turbo"</span>,</span>
<span id="cb36-7"><a href="#cb36-7"></a>    messages<span class="op">=</span>[</span>
<span id="cb36-8"><a href="#cb36-8"></a>        {</span>
<span id="cb36-9"><a href="#cb36-9"></a>            <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb36-10"><a href="#cb36-10"></a>            <span class="st">"content"</span>: [</span>
<span id="cb36-11"><a href="#cb36-11"></a>                {<span class="st">"type"</span>: <span class="st">"text"</span>, <span class="st">"text"</span>: <span class="st">"What is unusual about this image?"</span>},</span>
<span id="cb36-12"><a href="#cb36-12"></a>                {</span>
<span id="cb36-13"><a href="#cb36-13"></a>                    <span class="st">"type"</span>: <span class="st">"image_url"</span>,</span>
<span id="cb36-14"><a href="#cb36-14"></a>                    <span class="st">"image_url"</span>: {</span>
<span id="cb36-15"><a href="#cb36-15"></a>                        <span class="st">"url"</span>: <span class="st">"https://i.pinimg.com/736x/6e/71/0d/6e710de5084379ba6a57b77e6579084f.jpg"</span>,</span>
<span id="cb36-16"><a href="#cb36-16"></a>                    },</span>
<span id="cb36-17"><a href="#cb36-17"></a>                },</span>
<span id="cb36-18"><a href="#cb36-18"></a>            ],</span>
<span id="cb36-19"><a href="#cb36-19"></a>        }</span>
<span id="cb36-20"><a href="#cb36-20"></a>    ],</span>
<span id="cb36-21"><a href="#cb36-21"></a>    max_tokens<span class="op">=</span><span class="dv">300</span>,</span>
<span id="cb36-22"><a href="#cb36-22"></a>)</span>
<span id="cb36-23"><a href="#cb36-23"></a></span>
<span id="cb36-24"><a href="#cb36-24"></a><span class="bu">print</span>(response.choices[<span class="dv">0</span>].message.content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The unusual aspect of this image is a man ironing clothes on an ironing board placed on top of a taxi in the middle of a busy street. This is an uncommon sight, as ironing typically takes place in domestic or commercial indoor settings. The juxtaposition of such a mundane, home-based activity with the fast-paced, outdoor environment of a city street is quite remarkable and humorous. Additionally, both the ironing board and the taxi are branded with the same logo, suggesting that this scene might be part of a promotional event or public stunt to attract attention.</code></pre>
</div>
</div>
</section>
<section id="multimodal-3" class="slide level2 smaller">
<h2>MultiModal</h2>

<img data-src="https://media.makeameme.org/created/it-worked-fine.jpg" class="r-stretch"></section>
<section id="multimodal-4" class="slide level2 smaller">
<h2>MultiModal</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-05-01T01:44:30.863286Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T01:44:23.170706Z&quot;}" data-execution_count="23">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb38-2"><a href="#cb38-2"></a></span>
<span id="cb38-3"><a href="#cb38-3"></a>client <span class="op">=</span> OpenAI()</span>
<span id="cb38-4"><a href="#cb38-4"></a></span>
<span id="cb38-5"><a href="#cb38-5"></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb38-6"><a href="#cb38-6"></a>    model<span class="op">=</span><span class="st">"gpt-4-turbo"</span>,</span>
<span id="cb38-7"><a href="#cb38-7"></a>    messages<span class="op">=</span>[</span>
<span id="cb38-8"><a href="#cb38-8"></a>        {</span>
<span id="cb38-9"><a href="#cb38-9"></a>            <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb38-10"><a href="#cb38-10"></a>            <span class="st">"content"</span>: [</span>
<span id="cb38-11"><a href="#cb38-11"></a>                {<span class="st">"type"</span>: <span class="st">"text"</span>, <span class="st">"text"</span>: <span class="st">"What is in this image?"</span>},</span>
<span id="cb38-12"><a href="#cb38-12"></a>                {</span>
<span id="cb38-13"><a href="#cb38-13"></a>                    <span class="st">"type"</span>: <span class="st">"image_url"</span>,</span>
<span id="cb38-14"><a href="#cb38-14"></a>                    <span class="st">"image_url"</span>: {</span>
<span id="cb38-15"><a href="#cb38-15"></a>                        <span class="st">"url"</span>: <span class="st">"https://media.makeameme.org/created/it-worked-fine.jpg"</span>,</span>
<span id="cb38-16"><a href="#cb38-16"></a>                    },</span>
<span id="cb38-17"><a href="#cb38-17"></a>                },</span>
<span id="cb38-18"><a href="#cb38-18"></a>            ],</span>
<span id="cb38-19"><a href="#cb38-19"></a>        }</span>
<span id="cb38-20"><a href="#cb38-20"></a>    ],</span>
<span id="cb38-21"><a href="#cb38-21"></a>    max_tokens<span class="op">=</span><span class="dv">300</span>,</span>
<span id="cb38-22"><a href="#cb38-22"></a>)</span>
<span id="cb38-23"><a href="#cb38-23"></a></span>
<span id="cb38-24"><a href="#cb38-24"></a><span class="bu">print</span>(response.choices[<span class="dv">0</span>].message.content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The image is a meme featuring two juxtaposed elements. In the background, there is a scene of a house on fire with firefighters and emergency responders at the site, attempting to manage the situation. In the foreground, there is a young girl smirking at the camera with a knowing expression. Overlaid text reads, "IT WORKED FINE IN DEV, IT'S A DEVOPS PROBLEM NOW," humorously suggesting that a problem developed during the software development stage is now a problem for the DevOps team to handle. The meme uses the incongruity between the calm and mischievous expression of the girl and the chaotic scene behind her to underline its comedic message about shifting blame in a development context.</code></pre>
</div>
</div>
</section>
<section id="multimodal-5" class="slide level2">
<h2>MultiModal</h2>

<img data-src="https://storage.googleapis.com/pai-images/a6d0952a331d40489b216e7f3f1ff6ed.jpeg" class="r-stretch"></section>
<section id="multimodal-6" class="slide level2 smaller">
<h2>MultiModal</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-30T23:16:37.171132Z&quot;,&quot;start_time&quot;:&quot;2024-04-30T23:16:26.697260Z&quot;}" data-execution_count="21">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb40-2"><a href="#cb40-2"></a></span>
<span id="cb40-3"><a href="#cb40-3"></a>client <span class="op">=</span> OpenAI()</span>
<span id="cb40-4"><a href="#cb40-4"></a></span>
<span id="cb40-5"><a href="#cb40-5"></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb40-6"><a href="#cb40-6"></a>    model<span class="op">=</span><span class="st">"gpt-4-turbo"</span>,</span>
<span id="cb40-7"><a href="#cb40-7"></a>    messages<span class="op">=</span>[</span>
<span id="cb40-8"><a href="#cb40-8"></a>        {</span>
<span id="cb40-9"><a href="#cb40-9"></a>            <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb40-10"><a href="#cb40-10"></a>            <span class="st">"content"</span>: [</span>
<span id="cb40-11"><a href="#cb40-11"></a>                {</span>
<span id="cb40-12"><a href="#cb40-12"></a>                    <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb40-13"><a href="#cb40-13"></a>                    <span class="st">"text"</span>: <span class="st">"Give me a long list of visual search tags/keywords so I can "</span></span>
<span id="cb40-14"><a href="#cb40-14"></a>                    <span class="st">"index this image in my visual search index. Respond in JSON format {'labels': ['label1', ...]}"</span>,</span>
<span id="cb40-15"><a href="#cb40-15"></a>                },</span>
<span id="cb40-16"><a href="#cb40-16"></a>                {</span>
<span id="cb40-17"><a href="#cb40-17"></a>                    <span class="st">"type"</span>: <span class="st">"image_url"</span>,</span>
<span id="cb40-18"><a href="#cb40-18"></a>                    <span class="st">"image_url"</span>: {</span>
<span id="cb40-19"><a href="#cb40-19"></a>                        <span class="st">"url"</span>: <span class="st">"https://storage.googleapis.com/pai-images/a6d0952a331d40489b216e7f3f1ff6ed.jpeg"</span>,</span>
<span id="cb40-20"><a href="#cb40-20"></a>                    },</span>
<span id="cb40-21"><a href="#cb40-21"></a>                },</span>
<span id="cb40-22"><a href="#cb40-22"></a>            ],</span>
<span id="cb40-23"><a href="#cb40-23"></a>        }</span>
<span id="cb40-24"><a href="#cb40-24"></a>    ],</span>
<span id="cb40-25"><a href="#cb40-25"></a>    response_format<span class="op">=</span>{<span class="st">"type"</span>: <span class="st">"json_object"</span>},</span>
<span id="cb40-26"><a href="#cb40-26"></a>)</span>
<span id="cb40-27"><a href="#cb40-27"></a></span>
<span id="cb40-28"><a href="#cb40-28"></a><span class="bu">print</span>(response.choices[<span class="dv">0</span>].message.content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "labels": [
    "animated character",
    "wizard",
    "Minion",
    "fantasy",
    "3D illustration",
    "cute",
    "magic",
    "staff",
    "long beard",
    "blue hat",
    "glasses",
    "overalls",
    "adventure",
    "comical character",
    "grey beard",
    "wooden staff",
    "round glasses",
    "yellow",
    "character design",
    "creative",
    "digital art",
    "sorcerer",
    "cartoon",
    "funny",
    "elderly character",
    "mystical",
    "storybook",
    "cloak",
    "leather belt",
    "buckle"
  ]
}</code></pre>
</div>
</div>
</section>
<section id="code-interpreter-data-analysis" class="slide level2">
<h2>Code Interpreter (Data Analysis)</h2>
<ul>
<li>give the LLM access to Python</li>
<li>your own little data analyst to give tasks to</li>
</ul>
<p><a href="https://chat.openai.com/c/2a470564-6868-408a-ae61-b7c1c24c40a5">example</a></p>
</section></section>
<section>
<section id="fine-tuning" class="title-slide slide level1 center">
<h1>Fine Tuning</h1>

</section>
<section id="fine-tuning-1" class="slide level2">
<h2>Fine Tuning</h2>
<ul>
<li>todo</li>
<li><a href="https://github.com/OpenAccess-AI-Collective/axolotl?tab=readme-ov-file">axolotl</a></li>
<li><a href="https://github.com/pytorch/torchtune">torchtune</a></li>
</ul>
</section></section>
<section>
<section id="agents" class="title-slide slide level1 center">
<h1>Agents</h1>

</section>
<section id="agents-1" class="slide level2">
<h2>Agents</h2>
<ul>
<li>todo</li>
</ul>
</section></section>
<section id="resources" class="title-slide slide level1 center">
<h1>Resources</h1>

</section>

<section id="resources-1" class="title-slide slide level1 smaller center">
<h1>Resources</h1>
<div class="columns">
<div class="column" style="width:33%;">
<ul>
<li><a href="https://x.com/jeremyphoward">Jeremy Howard</a>
<ul>
<li><a href="https://www.youtube.com/watch?v=jkrNMKz9pWU&amp;t=186s">A Hackers’ Guide to Language Models</a></li>
</ul></li>
<li><a href="https://twitter.com/HamelHusain">Hamel Husain</a></li>
<li><a href="https://twitter.com/maximelabonne">Maxime Labonne</a></li>
<li><a href="https://twitter.com/rasbt">Sebastian Raschka</a></li>
<li><a href="https://twitter.com/abacaj">anton</a></li>
<li><a href="https://twitter.com/Teknium1">Teknium</a></li>
<li><a href="https://twitter.com/simonw">Simon Willison</a></li>
<li><a href="https://open.spotify.com/show/2J3lqMPD0BUI0bF9KJYKc1?si=9eed369fd01a4ade">ThursdAI podcast</a></li>
<li><a href="https://www.latent.space/">Latent Space</a></li>
</ul>
</div><div class="column" style="width:33%;">
<ul>
<li><a href="https://twitter.com/JayAlammar">Jay Alammar</a></li>
<li><a href="https://twitter.com/osanseviero">Omar Sanseviero</a></li>
<li><a href="https://twitter.com/jxnlco">Jason Liu</a></li>
<li><a href="https://twitter.com/lateinteraction">Late Interaction</a></li>
<li><a href="https://twitter.com/winglian">Wing Liang</a></li>
<li><a href="https://twitter.com/NousResearch">Nous Research</a></li>
<li><a href="https://twitter.com/alexalbert__">Alex Albert</a></li>
<li><a href="https://twitter.com/mattshumer_">Matt Shumer</a></li>
<li><a href="https://twitter.com/lmsysorg">lmsysorg</a></li>
<li><a href="https://twitter.com/axolotl_ai">axolotl_ai</a></li>
<li><a href="https://twitter.com/natolambert">Nat Lambert</a></li>
</ul>
</div><div class="column" style="width:33%;">
<ul>
<li><a href="https://twitter.com/iScienceLuvr">Tanishq Abraham</a></li>
<li><a href="https://twitter.com/_philschmid">Phil Schmid</a></li>
<li><a href="https://twitter.com/Tim_Dettmers">Tim Dettmers</a></li>
<li><a href="https://twitter.com/eugeneyan">Eugene Yan</a></li>
<li><a href="https://twitter.com/ggerganov">Gergana Ivanova</a></li>
<li><a href="https://twitter.com/DrJimFan">Jim Fan</a></li>
<li><a href="https://twitter.com/swyx">swyx</a></li>
<li><a href="https://twitter.com/charles_irl">Charles Frye</a></li>
<li><a href="https://twitter.com/jefrankle">Jonathan Frankle</a></li>
<li><a href="https://twitter.com/Nils_Reimers">Nils Reimers</a></li>
<li><a href="https://twitter.com/alignment_lab">Alignment Lab</a></li>
<li><a href="https://twitter.com/cleavey1985/following">people I follow</a></li>
</ul>
</div>
</div>

<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>